---
title: "traviz2"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{traviz2}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```
traviz is a package to meaningfully analyze and visualize trajectories in multiple ways. To showcase some of the features of traviz, we'll use [enviroCar](https://envirocar.org/?lng=en) trajectory data in Muenster, Germany. To collect enviroCar data, the [envirocar-py](https://github.com/enviroCar/envirocar-py) package was used. Keep in mind traviz is not limited to vehicular trajectory data only and can work with all types of trajectory data. 
```{r setup}
library(traviz)
```
## traviz approaches to trajectories: point analysis or overall line analysis

traviz offers two approaches to dealing with trajectory data. The trajectory can either be analyzed as a whole geometry with the complete line or the trajectory can be analyzed point by point. The point by point approach will be showcased in this vignette.

## Dataset: enviroCar sampled data

To explore the basics of working with trajectory data in traviz, we'll use the enviroCar data included in the package. This is included as 'ec.trj'. The dataset consists of:
```{r}
ec <- read.csv("/home/john/Desktop/traviz/data/tracks.csv",header = TRUE, check.names = TRUE)
ec[1,]
```
enviroCar trajectory data contains geographic data with geometry points in sf format, a unique identifier for each track, time stamps, and data measurements at those timestamps. 

## Approach two: Overall line analysis
To handle trajectory data, a model similar to [trajectories](https://github.com/edzer/trajectories) was followed, extending aspects the data structure to support sf. This class is called sfTrack and contains the following slots:

* **id**: unique id value for track
* **data**: dataframe of track data
* **time**: POSIXct format timestamps
* **geometry**: point geometry of track in sfc format
* **line**: LINESTRING trajectory of track

Similar to the Tracks class in [trajectories](https://github.com/edzer/trajectories), multiple sfTrack objects are stored under sfTracks which is a list of sfTrack objects.
